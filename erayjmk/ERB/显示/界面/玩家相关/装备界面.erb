@UI_EQUIP
PRINTL 
PRINTL 
PRINTL 
PRINTL 
DRAWLINE
PRINTL 装备栏
DRAWLINE
TARGET = 0
FOR LOCAL,1,13
PRINTFORM %EQUIPNAME:LOCAL,6,LEFT%:
PRINTFORML [{LOCAL,3,RIGHT}]\@EQUIP:LOCAL != 0 ? %ISTR:(PACK_USE:(EQUIP:LOCAL):1):0%#未佩戴装备\@
NEXT
PRINTL
PRINTL
PRINTL
PRINTL
DRAWLINE

PRINTFORML [100]%"全部撤下",8,LEFT%
DRAWLINE
PRINTFORML [000]返回

;ARG为装备格子ID(201-212)
@UI_EQUIP_CHANGE,ARG
#DIM ITEM_ID
#DIM EQUIP_ID
#DIM TOTAL_ITEM
#DIM PAGE
#DIM EQUIP_NO,21
#DIM PRE_EQUIP_NO,21
PAGE = 1
EQUIP_ID = ARG
TOTAL_ITEM = 1
$RE_EQUIP
PRINTL 
PRINTL 
PRINTL 
DRAWLINE
PRINTL 装备更换
DRAWLINE
FOR LOCAL,1,21
	ITEM_ID = PACK_USE:TOTAL_ITEM:1
	;判断是否能装备
	;					装备类型与等级对应						     当前遍历小于最大物品数     已装备物品排除
	IF ITEM_INFO:ITEM_ID:0 == EQUIP_WEARABLE_CHECK(TOTAL_ITEM,ARG) && TOTAL_ITEM <= PACK_USED && PACK_USE:TOTAL_ITEM:3 == 0
		PRINTFORM [{LOCAL,2,RIGHT}]%ISTR:ITEM_ID:0,20,LEFT%LV{ITEM_INFO:ITEM_ID:2,3,LEFT}
		CALL ITEM_BASE_PRINT,ITEM_ID,TOTAL_ITEM
		EQUIP_NO:LOCAL = TOTAL_ITEM
		PRINTL
		TOTAL_ITEM += 1
	ELSEIF ITEM_ID != 0
		LOCAL -= 1
		TOTAL_ITEM += 1
	ELSE
		PRINTFORML 
		TOTAL_ITEM += 1
	ENDIF
NEXT
DRAWLINE
PRINTFORM \@PAGE > 1 ? [100]上一页        #\@
PRINTFORML \@TOTAL_ITEM+(PAGE-1)*20 < PACK_USED ? [101]下一页#\@
PRINTFORML [000]返回

INPUT
CLEARLINE 1
SELECTCASE RESULT
	CASE 0
		CALL UI_PLAYER,"装备"
	CASE 1 TO 20
		CALL EQUIP_WEAR,EQUIP_NO:RESULT,EQUIP_ID
		CALL UI_PLAYER,"装备"
	CASE 100
		SIF PAGE < 2
			GOTO RE_EQUIP
		PAGE -= 1
		TOTAL_ITEM = PRE_EQUIP_NO:1
		GOTO RE_EQUIP
	CASE 101
		;储存上一页装备所在的背包格子ID
		FOR LOCAL,1,21
		PRE_EQUIP_NO:LOCAL = EQUIP_NO:LOCAL
		NEXT
		PAGE += 1
		GOTO RE_EQUIP
	CASEELSE
ENDSELECT
