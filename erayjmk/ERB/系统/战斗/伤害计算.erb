;输入初始HP，返回伤害后的HP
@ENEMY_HP_TARGET(HP,ENEMY_ID)
#FUNCTION
#DIM HP
#DIM ENEMY_ID
HP -= PC_DAMAGE(DMG_TYPE_CHOOSE(),DEF_TYPE_CHOOSE(),ENEMY_ID)
RETURNF HP


;人物伤害(TYPE 1普通物理伤害,2   )
@PC_DAMAGE(DMG_TYPE,DEF_TYPE,NO_ENEMY)
#FUNCTION
#DIM DMG_TYPE
#DIM DEF_TYPE
#DIM NO_ENEMY
SELECTCASE DMG_TYPE
	CASE 1
		RETURNF PC_NORMAL_DAMAGE()*PC_DAMAGE_REDUCE(DEF_TYPE,NO_ENEMY)/100
	CASEELSE
ENDSELECT

;人物普通物理伤害
@PC_NORMAL_DAMAGE()
#FUNCTION
#DIM DAMAGE
#DIM WAVE
WAVE = FLAG:9 - FLAG:8
DAMAGE = FLAG:8 + RAND(0,WAVE)
;概率暴击
SIF CHANCE(BASE:28,100) == 1
	DAMAGE = DAMAGE * (BASE:29)/100
RETURNF DAMAGE

;根据不同情况的人物伤害减少
@PC_DAMAGE_REDUCE(TYPE,AIM_ENEMY)
#FUNCTION
#DIM TYPE
#DIM AIM_ENEMY
TARGET = AIM_ENEMY
SELECTCASE TYPE
	;1只按护甲计算
	CASE 1
		RETURNF (100-(BASE:30))
	CASEELSE
		;100/100即全额伤害
		RETURNF 100
ENDSELECT

@DMG_TYPE_CHOOSE()
#FUNCTION
;设计中，暂无
RETURNF 1

@DEF_TYPE_CHOOSE()
#FUNCTION
;设计中，暂无
RETURNF 1










