;能否升级判断
@LEVELUP_ABLE
TARGET = 0
IF BASE:4 >= BASE:3
	CALL LEVELUP
ELSE
ENDIF
	
	

@LEVELUP
TARGET = 0
BASE:4 -= BASE:3
BASE:2 += 1
BASE:3 = EXP_NEED()
CALL BASE_LV_UPDATE



;升级后属性更新
@BASE_LV_UPDATE
TARGET = 0
;剩余属性点+2
BASE:11 += 2
;力智敏攻击力护甲自然成长
IF (BASE:2-1)%5 == 0
BASE:5 += BASE:15
BASE:6 += BASE:16
BASE:7 += BASE:17
BASE:8 += 2
BASE:9 += 2
ELSE
ENDIF
;血蓝自然成长
BASE:12 += BASE:25
BASE:13 += BASE:26
;升级后满状态
CALL RECOVER,8


;加点后属性更新,ARG为101力，102敏，10智
@BASE_ADD_UPDATE,ARG
TARGET = 0
SELECTCASE ARG
	CASE 101
		BASE:5 += 1
		BASE:11 -= 1
	CASE 102
		BASE:6 += 1
		BASE:11 -= 1
	CASE 103
		BASE:7 += 1
		BASE:11 -= 1
	CASEELSE
		CALL UI_PLAYER,"人物属性"
ENDSELECT
CALL BASE_PC_UPDATE
CALL UI_PLAYER,"人物属性"



;升级所需经验
@EXP_NEED()
#FUNCTION

SELECTCASE BASE:2
	CASE 1 TO 10
		LOCAL = 100*BASE:2 + BASE:3
		SIF BASE:2 == 10
			LOCAL += 2000
		RETURNF LOCAL
	CASE 11 TO 20
		LOCAL += 200*BASE:2 + BASE:3
		SIF BASE:2 == 10
			LOCAL += 5000
		RETURNF LOCAL
	CASEELSE
ENDSELECT


;ARG为新怪物产生的编号
@EXP_GAIN(ARG)
#FUNCTION
TARGET = ARG
RETURNF BASE:42



