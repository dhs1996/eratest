@UI_PACK
#DIM PACK_ID
#DIM LIGHT
#DIM PAGE_COUNT
#DIM LC,2
LC:1=LINECOUNT
LIGHT = -1
PAGE_COUNT = 0
$REM_RESHOW
PRINTFORML 背包
PRINTL ----------------------------------------------------
FOR LOCAL,PAGE_COUNT,PAGE_COUNT+PAGE_NUM
	SIF LIGHT == LOCAL
		SETCOLOR 0xFFFF00
	IF PACK:LOCAL:0 != 0
		PRINTFORM [{LOCAL,3}]
		CALLFORM BLOCKNAME_{PACK:LOCAL:0}
		PRINTFORML {PACK:LOCAL:1,2}个
	ELSE
		PRINTL [---]无
	ENDIF
	RESETCOLOR
NEXT
PRINTL ----------------------------------------------------
PRINTFORM \@ PAGE_COUNT != 0 ? [998]%"上一页",8,LEFT%#\@
PRINTFORML \@ PAGE_COUNT+PAGE_NUM != PACK_UNLOCK ? [999]%"下一页",8,LEFT%#\@
SIF LIGHT !=-1
	PRINTFORM \@ BLOCK(PACK:LIGHT:0,"ABLE_USE") == 1 ? [200]%"使用",8,LEFT%#\@
PRINTFORM \@ LIGHT != -1 ? [201]%"丢弃",8,LEFT%#\@
PRINTFORML [202]%"返回",8,LEFT%
PRINTL ----------------------------------------------------
INPUT
CLEARLINE 1
SIF RESULT < 200
	PACK_ID = RESULT
SELECTCASE RESULT
	CASE 0 TO 199
		LIGHT = RESULT
		GOTO REM_RESHOW
	CASE 201
		SIF LIGHT == -1 || PACK:PACK_ID:0 == 0
			CALL UI_PACK
		PRINT 你要丢弃多少个
		CALLFORM BLOCKNAME_{PACK:PACK_ID:0}
		PRINTFORML ?(0~{PACK:PACK_ID:1})
		INPUT
		CLEARLINE 1
		IF RESULT > PACK:PACK_ID:1
			PRINT 你没有那么多
			CALLFORM BLOCKNAME_{PACK:PACK_ID:0}
			PRINTW
			CLEARLINE 1
		ELSE
			CALL REMOVE_BLOCK,PACK_ID,RESULT
			SIF PACK:PACK_ID:0 == 0
				LIGHT += 1
				PACK_ID += 1
			GOTO REM_RESHOW
		ENDIF
	CASE 202
		PRINTL
		PRINTL
		PRINTL
		PRINTL
		PRINTL
		CALL MAIN
	CASE 998
		SIF PAGE_COUNT != 0
			PAGE_COUNT -= PAGE_NUM
		GOTO REM_RESHOW
	CASE 999
		SIF PAGE_COUNT+PAGE_NUM != PACK_UNLOCK
			PAGE_COUNT += PAGE_NUM
		GOTO REM_RESHOW
	CASEELSE
		GOTO REM_RESHOW
ENDSELECT